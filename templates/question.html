<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Survey</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            color: black;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .question {
            display: none;
            margin-bottom: 20px;
            text-align: left;
            width: 100%;
        }

        .question.active {
            display: block;
        }

        .question h2 {
            margin-bottom: 15px;
            font-size: 20px;
            text-align: center;
        }

        .slider-container {
            text-align: center;
            margin-top: 20px;
        }

        .slider-container input[type="range"] {
            width: 80%;
        }

        .slider-container output {
            display: block;
            margin-top: 10px;
            font-size: 18px;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .action-button {
            padding: 10px 20px;
            font-size: 16px;
            color: #fff;
            background-color: #007BFF;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 120px;
        }

        .action-button:hover {
            background-color: #0056b3;
        }

    </style>
</head>
<body>

    <div>
        <h1>找出適合您的國家</h1>

        <!-- 問題 1 -->
        <div class="question active" id="question1">
            <h2>您喜歡大國嗎？（1 = 完全不喜歡，10 = 非常喜歡）</h2>
            <div class="slider-container">
                <input type="range" id="country-size" min="1" max="10" value="1" step="1" oninput="updateOutput('country-size', this.value)">
                <output id="country-size-output">1</output>
            </div>
            <div class="action-buttons">
                <button class="action-button" onclick="nextQuestion(1)">下一題</button>
            </div>
        </div>

        <!-- 問題 2 -->
        <div class="question" id="question2">
            <h2>您喜歡人口密度高的國家嗎？（1 = 完全不喜歡，10 = 非常喜歡）</h2>
            <div class="slider-container">
                <input type="range" id="density" min="1" max="10" value="1" step="1" oninput="updateOutput('density', this.value)">
                <output id="density-output">1</output>
            </div>
            <div class="action-buttons">
                <button class="action-button" onclick="nextQuestion(2)">下一題</button>
            </div>
        </div>

        <!-- 問題 3 -->
        <div class="question" id="question3">
            <h2>國家武力對您有多重要？（1 = 不重要，10 = 非常重要）</h2>
            <div class="slider-container">
                <input type="range" id="army" min="1" max="10" value="1" step="1" oninput="updateOutput('army', this.value)">
                <output id="army-output">1</output>
            </div>
            <div class="action-buttons">
                <button class="action-button" onclick="nextQuestion(3)">下一題</button>
            </div>
        </div>

        <!-- 問題 4 -->
        <div class="question" id="question4">
            <h2>您喜歡自然環境較多的國家嗎？（1 = 不喜歡，10 = 非常喜歡）</h2>
            <div class="slider-container">
                <input type="range" id="forest" min="1" max="10" value="1" step="1" oninput="updateOutput('forest', this.value)">
                <output id="forest-output">1</output>
            </div>
            <div class="action-buttons">
                <button class="action-button" onclick="nextQuestion(4)">下一題</button>
            </div>
        </div>

        <!-- 問題 5 -->
        <div class="question" id="question5">
            <h2>您喜歡安全的國家嗎？（1 = 不重要，10 = 非常重要）</h2>
            <div class="slider-container">
                <input type="range" id="safety" min="1" max="10" value="1" step="1" oninput="updateOutput('safety', this.value)">
                <output id="safety-output">1</output>
            </div>
            <div class="action-buttons">
                <button class="action-button" onclick="nextQuestion(5)">下一題</button>
            </div>
        </div>

        <!-- 問題 6 -->
        <div class="question" id="question6">
            <h2>人民的政治權利對您有多重要？（1 = 不重要，10 = 非常重要）</h2>
            <div class="slider-container">
                <input type="range" id="political-rights" min="1" max="10" value="1" step="1" oninput="updateOutput('political-rights', this.value)">
                <output id="political-rights-output">1</output>
            </div>
            <div class="action-buttons">
                <button class="action-button" onclick="nextQuestion(6)">下一題</button>
            </div>
        </div>

        <!-- 問題 7 -->
        <div class="question" id="question7">
            <h2>公民自由對您有多重要？（1 = 不重要，10 = 非常重要）</h2>
            <div class="slider-container">
                <input type="range" id="civil-liberties" min="1" max="10" value="1" step="1" oninput="updateOutput('civil-liberties', this.value)">
                <output id="civil-liberties-output">1</output>
            </div>
            <div class="action-buttons">
                <button class="action-button" onclick="nextQuestion(7)">下一題</button>
            </div>
        </div>
        <!-- 問題 8 -->
            <div class="question" id="question8">
                <h2>人民教育環境對您有多重要？（1 = 不重要，10 = 非常重要）</h2>
                <div class="slider-container">
                    <input type="range" id="education" min="1" max="10" value="1" step="1" oninput="updateOutput('education', this.value)">
                    <output id="education-output">1</output>
                </div>
                <div class="action-buttons">
                    <button class="action-button" onclick="nextQuestion(8)">下一題</button>
                </div>
            </div>

            <!-- 問題 9 -->
            <div class="question" id="question9">
                <h2>人民醫療環境對您有多重要？（1 = 不重要，10 = 非常重要）</h2>
                <div class="slider-container">
                    <input type="range" id="healthcare" min="1" max="10" value="1" step="1" oninput="updateOutput('healthcare', this.value)">
                    <output id="healthcare-output">1</output>
                </div>
                <div class="action-buttons">
                    <button class="action-button" onclick="nextQuestion(9)">下一題</button>
                </div>
            </div>

            <!-- 問題 10 -->
            <div class="question" id="question10">
                <h2>您的經濟條件如何？（1 = 非常差，10 = 非常好）</h2>
                <div class="slider-container">
                    <input type="range" id="economic-status" min="1" max="10" value="1" step="1" oninput="updateOutput('economic-status', this.value)">
                    <output id="economic-status-output">1</output>
                </div>
                <div class="action-buttons">
                    <button class="action-button" onclick="submitPreferences()">提交</button>
                </div>
            </div>

        <!-- 推薦結果 -->
        <div id="result"></div>
    </div>

    <script>
        function updateOutput(id, value) {
            document.getElementById(`${id}-output`).textContent = value;
        }

        function nextQuestion(currentQuestion) {
            document.getElementById(`question${currentQuestion}`).classList.remove("active");
            document.getElementById(`question${currentQuestion + 1}`).classList.add("active");
        }


        async function submitPreferences() {
            const countrySize = document.getElementById("country-size").value;
            const density = document.getElementById("density").value;
            const army = document.getElementById("army").value;
            const alcohol = document.getElementById("alcohol").value;
            const safety = document.getElementById("safety").value;
            const politicalRights = document.getElementById("political-rights").value;
            const civilLiberties = document.getElementById("civil-liberties").value;
            const education = document.getElementById("education").value;
            const healthcare = document.getElementById("healthcare").value;
            const economicStatus = document.getElementById("economic-status").value;

            const response = await fetch('/analyze', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    countrySize, density, army, alcohol, safety,
                    politicalRights, civilLiberties, education,
                    healthcare, economicStatus
                })
            });


            if (response.ok) {
                // 重定向到結果頁面
                window.location.href = "/result";
            } else {
                alert("提交失敗，請稍後再試！");
            }
        }

    </script>
</body>
</html>
